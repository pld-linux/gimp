diff -Nur gimp-1.2.2.orig/data/brushes/Makefile.am gimp-1.2.2/data/brushes/Makefile.am
--- gimp-1.2.2.orig/data/brushes/Makefile.am	Sat Apr  7 13:24:36 2001
+++ gimp-1.2.2/data/brushes/Makefile.am	Fri Aug  3 22:44:15 2001
@@ -59,7 +59,3 @@
 	SketchBrush-32.gih	\
 	SketchBrush-64.gih	\
 	xcf.gbr
-
-install-data-local:
-	rm -f $(brushdatadir)/round1.vbr $(brushdatadir)/pepper.gpb
-
diff -Nur gimp-1.2.2.orig/data/brushes/Makefile.am.orig gimp-1.2.2/data/brushes/Makefile.am.orig
--- gimp-1.2.2.orig/data/brushes/Makefile.am.orig	Thu Jan  1 01:00:00 1970
+++ gimp-1.2.2/data/brushes/Makefile.am.orig	Sat Apr  7 13:24:36 2001
@@ -0,0 +1,65 @@
+brushdatadir = $(gimpdatadir)/brushes
+
+brushdata =
+gradientdata =
+palettedata =
+patterndata =
+
+brushdata_DATA = @brushdata@
+
+EXTRA_DIST = $(brushdata_DATA)
+
+.PHONY: files
+
+FILES = \
+	10x10square.gbr		\
+	10x10squareBlur.gbr	\
+	11circle.gbr		\
+	11fcircle.gbr		\
+	13circle.gbr		\
+	13fcircle.gbr		\
+	15circle.gbr		\
+	15fcircle.gbr		\
+	17circle.gbr		\
+	17fcircle.gbr		\
+	19circle.gbr		\
+	19fcircle.gbr		\
+	1circle.gbr		\
+	20x20square.gbr		\
+	20x20squareBlur.gbr	\
+	3circle.gbr		\
+	3fcircle.gbr		\
+	5circle.gbr		\
+	5fcircle.gbr		\
+	5x5square.gbr		\
+	5x5squareBlur.gbr	\
+	7circle.gbr		\
+	7fcircle.gbr		\
+	9circle.gbr		\
+	9fcircle.gbr		\
+	DStar11.gbr		\
+	DStar17.gbr		\
+	DStar25.gbr		\
+	callig1.gbr		\
+	callig2.gbr		\
+	callig3.gbr		\
+	callig4.gbr		\
+	confetti.gbr		\
+	confetti.gih		\
+	dunes.gbr		\
+	feltpen.gih		\
+	galaxy.gbr		\
+	galaxy_big.gbr		\
+	galaxy_small.gbr	\
+	hsparks.gih		\
+	pepper.gbr		\
+	pixel.gbr		\
+	thegimp.gbr		\
+	SketchBrush-16.gih	\
+	SketchBrush-32.gih	\
+	SketchBrush-64.gih	\
+	xcf.gbr
+
+install-data-local:
+	rm -f $(brushdatadir)/round1.vbr $(brushdatadir)/pepper.gpb
+
diff -Nur gimp-1.2.2.orig/data/brushes/Makefile.in gimp-1.2.2/data/brushes/Makefile.in
--- gimp-1.2.2.orig/data/brushes/Makefile.in	Thu Jul 26 21:37:17 2001
+++ gimp-1.2.2/data/brushes/Makefile.in	Fri Aug  3 22:44:15 2001
@@ -313,9 +313,6 @@
 
 .PHONY: files
 
-install-data-local:
-	rm -f $(brushdatadir)/round1.vbr $(brushdatadir)/pepper.gpb
-
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
diff -Nur gimp-1.2.2.orig/data/brushes/Makefile.in.orig gimp-1.2.2/data/brushes/Makefile.in.orig
--- gimp-1.2.2.orig/data/brushes/Makefile.in.orig	Thu Jan  1 01:00:00 1970
+++ gimp-1.2.2/data/brushes/Makefile.in.orig	Thu Jul 26 21:37:17 2001
@@ -0,0 +1,321 @@
+# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+
+# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# This Makefile.in is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+
+SHELL = @SHELL@
+
+srcdir = @srcdir@
+top_srcdir = @top_srcdir@
+VPATH = @srcdir@
+prefix = @prefix@
+exec_prefix = @exec_prefix@
+
+bindir = @bindir@
+sbindir = @sbindir@
+libexecdir = @libexecdir@
+datadir = @datadir@
+sysconfdir = @sysconfdir@
+sharedstatedir = @sharedstatedir@
+localstatedir = @localstatedir@
+libdir = @libdir@
+infodir = @infodir@
+mandir = @mandir@
+includedir = @includedir@
+oldincludedir = /usr/include
+
+DESTDIR =
+
+pkgdatadir = $(datadir)/@PACKAGE@
+pkglibdir = $(libdir)/@PACKAGE@
+pkgincludedir = $(includedir)/@PACKAGE@
+
+top_builddir = ../..
+
+ACLOCAL = @ACLOCAL@
+AUTOCONF = @AUTOCONF@
+AUTOMAKE = @AUTOMAKE@
+AUTOHEADER = @AUTOHEADER@
+
+INSTALL = @INSTALL@
+INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(AM_INSTALL_PROGRAM_FLAGS)
+INSTALL_DATA = @INSTALL_DATA@
+INSTALL_SCRIPT = @INSTALL_SCRIPT@
+transform = @program_transform_name@
+
+NORMAL_INSTALL = :
+PRE_INSTALL = :
+POST_INSTALL = :
+NORMAL_UNINSTALL = :
+PRE_UNINSTALL = :
+POST_UNINSTALL = :
+host_alias = @host_alias@
+host_triplet = @host@
+AA = @AA@
+AS = @AS@
+BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
+CATALOGS = @CATALOGS@
+CATOBJEXT = @CATOBJEXT@
+CC = @CC@
+CFLAGS = @CFLAGS@
+CPP = @CPP@
+CPPFLAGS = @CPPFLAGS@
+DATADIRNAME = @DATADIRNAME@
+DLLTOOL = @DLLTOOL@
+EMACS = @EMACS@
+EXTENSIVE_TESTS = @EXTENSIVE_TESTS@
+GAP_DECODE_MPEG = @GAP_DECODE_MPEG@
+GENCAT = @GENCAT@
+GIMP = @GIMP@
+GIMPDOCS = @GIMPDOCS@
+GIMPINSTALL = @GIMPINSTALL@
+GIMPTOOL = @GIMPTOOL@
+GIMP_CFLAGS = @GIMP_CFLAGS@
+GIMP_CFLAGS_NOUI = @GIMP_CFLAGS_NOUI@
+GIMP_CONTRIBUTORS = @GIMP_CONTRIBUTORS@
+GIMP_LIBS = @GIMP_LIBS@
+GIMP_LIBS_NOUI = @GIMP_LIBS_NOUI@
+GIMP_MAJOR_VERSION = @GIMP_MAJOR_VERSION@
+GIMP_MICRO_VERSION = @GIMP_MICRO_VERSION@
+GIMP_MINOR_VERSION = @GIMP_MINOR_VERSION@
+GIMP_MODULES = @GIMP_MODULES@
+GIMP_MP_FLAGS = @GIMP_MP_FLAGS@
+GIMP_MP_LIBS = @GIMP_MP_LIBS@
+GIMP_PERL = @GIMP_PERL@
+GIMP_PERL_PO = @GIMP_PERL_PO@
+GIMP_PLUGINS = @GIMP_PLUGINS@
+GIMP_PRINT_RELEASE_DATE = @GIMP_PRINT_RELEASE_DATE@
+GIMP_PRINT_VERSION = @GIMP_PRINT_VERSION@
+GIMP_REMOTE = @GIMP_REMOTE@
+GIMP_THREAD_FLAGS = @GIMP_THREAD_FLAGS@
+GIMP_THREAD_LIBS = @GIMP_THREAD_LIBS@
+GIMP_VERSION = @GIMP_VERSION@
+GLIBC21 = @GLIBC21@
+GLIB_CFLAGS = @GLIB_CFLAGS@
+GLIB_LIBS = @GLIB_LIBS@
+GMOFILES = @GMOFILES@
+GMSGFMT = @GMSGFMT@
+GNOME_CONFIG = @GNOME_CONFIG@
+GTKDOC = @GTKDOC@
+GTKXMHTML_CFLAGS = @GTKXMHTML_CFLAGS@
+GTKXMHTML_LIBS = @GTKXMHTML_LIBS@
+GTK_CFLAGS = @GTK_CFLAGS@
+GTK_CONFIG = @GTK_CONFIG@
+GTK_LIBS = @GTK_LIBS@
+HAVE_FINITE = @HAVE_FINITE@
+HAVE_GTK_DOC = @HAVE_GTK_DOC@
+HAVE_ISFINITE = @HAVE_ISFINITE@
+HELPBROWSER = @HELPBROWSER@
+HTML_DIR = @HTML_DIR@
+INSTOBJEXT = @INSTOBJEXT@
+INTLBISON = @INTLBISON@
+INTLLIBS = @INTLLIBS@
+INTLOBJS = @INTLOBJS@
+INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
+IN_GIMP = @IN_GIMP@
+JPEG = @JPEG@
+LDFLAGS = @LDFLAGS@
+LIBAA = @LIBAA@
+LIBICONV = @LIBICONV@
+LIBJPEG = @LIBJPEG@
+LIBMPEG = @LIBMPEG@
+LIBPNG = @LIBPNG@
+LIBTIFF = @LIBTIFF@
+LIBTOOL = @LIBTOOL@
+LIBUCB = @LIBUCB@
+LIBXMU = @LIBXMU@
+LIBXPM = @LIBXPM@
+LIBZ = @LIBZ@
+LN_S = @LN_S@
+LT_AGE = @LT_AGE@
+LT_CURRENT = @LT_CURRENT@
+LT_RELEASE = @LT_RELEASE@
+LT_REVISION = @LT_REVISION@
+MAILER = @MAILER@
+MAINT = @MAINT@
+MAKEINFO = @MAKEINFO@
+MKINSTALLDIRS = @MKINSTALLDIRS@
+MPEG = @MPEG@
+MSGFMT = @MSGFMT@
+OBJDUMP = @OBJDUMP@
+PACKAGE = @PACKAGE@
+PERL = @PERL@
+PNG = @PNG@
+POFILES = @POFILES@
+POSUB = @POSUB@
+PSP = @PSP@
+PYTHON = @PYTHON@
+PYTHON_CFLAGS = @PYTHON_CFLAGS@
+PYTHON_INCLUDES = @PYTHON_INCLUDES@
+PYTHON_LINK = @PYTHON_LINK@
+RANLIB = @RANLIB@
+SENDMAIL = @SENDMAIL@
+SO = @SO@
+TIFF = @TIFF@
+USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
+USE_NLS = @USE_NLS@
+VERSION = @VERSION@
+WEBBROWSER = @WEBBROWSER@
+XJT = @XJT@
+XPM = @XPM@
+gimpdatadir = @gimpdatadir@
+gimpdir = @gimpdir@
+gimpplugindir = @gimpplugindir@
+gimpsysconfdir = @gimpsysconfdir@
+localedir = @localedir@
+prefix = @prefix@
+pyexecdir = @pyexecdir@
+pythondir = @pythondir@
+
+brushdatadir = $(gimpdatadir)/brushes
+
+brushdata = 
+gradientdata = 
+palettedata = 
+patterndata = 
+
+brushdata_DATA = @brushdata@
+
+EXTRA_DIST = $(brushdata_DATA)
+
+FILES =  	10x10square.gbr			10x10squareBlur.gbr		11circle.gbr			11fcircle.gbr			13circle.gbr			13fcircle.gbr			15circle.gbr			15fcircle.gbr			17circle.gbr			17fcircle.gbr			19circle.gbr			19fcircle.gbr			1circle.gbr			20x20square.gbr			20x20squareBlur.gbr		3circle.gbr			3fcircle.gbr			5circle.gbr			5fcircle.gbr			5x5square.gbr			5x5squareBlur.gbr		7circle.gbr			7fcircle.gbr			9circle.gbr			9fcircle.gbr			DStar11.gbr			DStar17.gbr			DStar25.gbr			callig1.gbr			callig2.gbr			callig3.gbr			callig4.gbr			confetti.gbr			confetti.gih			dunes.gbr			feltpen.gih			galaxy.gbr			galaxy_big.gbr			galaxy_small.gbr		hsparks.gih			pepper.gbr			pixel.gbr			thegimp.gbr			SketchBrush-16.gih		SketchBrush-32.gih		SketchBrush-64.gih		xcf.gbr
+
+mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = ../../config.h
+CONFIG_CLEAN_FILES = 
+DATA =  $(brushdata_DATA)
+
+DIST_COMMON =  Makefile.am Makefile.in
+
+
+DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
+
+TAR = tar
+GZIP_ENV = --best
+all: all-redirect
+.SUFFIXES:
+$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps data/brushes/Makefile
+
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+	cd $(top_builddir) \
+	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
+
+
+install-brushdataDATA: $(brushdata_DATA)
+	@$(NORMAL_INSTALL)
+	$(mkinstalldirs) $(DESTDIR)$(brushdatadir)
+	@list='$(brushdata_DATA)'; for p in $$list; do \
+	  if test -f $(srcdir)/$$p; then \
+	    echo " $(INSTALL_DATA) $(srcdir)/$$p $(DESTDIR)$(brushdatadir)/$$p"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p $(DESTDIR)$(brushdatadir)/$$p; \
+	  else if test -f $$p; then \
+	    echo " $(INSTALL_DATA) $$p $(DESTDIR)$(brushdatadir)/$$p"; \
+	    $(INSTALL_DATA) $$p $(DESTDIR)$(brushdatadir)/$$p; \
+	  fi; fi; \
+	done
+
+uninstall-brushdataDATA:
+	@$(NORMAL_UNINSTALL)
+	list='$(brushdata_DATA)'; for p in $$list; do \
+	  rm -f $(DESTDIR)$(brushdatadir)/$$p; \
+	done
+tags: TAGS
+TAGS:
+
+
+distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
+
+subdir = data/brushes
+
+distdir: $(DISTFILES)
+	@for file in $(DISTFILES); do \
+	  d=$(srcdir); \
+	  if test -d $$d/$$file; then \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
+	  else \
+	    test -f $(distdir)/$$file \
+	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
+	    || cp -p $$d/$$file $(distdir)/$$file || :; \
+	  fi; \
+	done
+info-am:
+info: info-am
+dvi-am:
+dvi: dvi-am
+check-am: all-am
+check: check-am
+installcheck-am:
+installcheck: installcheck-am
+install-exec-am:
+install-exec: install-exec-am
+
+install-data-am: install-brushdataDATA install-data-local
+install-data: install-data-am
+
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
+install: install-am
+uninstall-am: uninstall-brushdataDATA
+uninstall: uninstall-am
+all-am: Makefile $(DATA)
+all-redirect: all-am
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install
+installdirs:
+	$(mkinstalldirs)  $(DESTDIR)$(brushdatadir)
+
+
+mostlyclean-generic:
+
+clean-generic:
+
+distclean-generic:
+	-rm -f Makefile $(CONFIG_CLEAN_FILES)
+	-rm -f config.cache config.log stamp-h stamp-h[0-9]*
+
+maintainer-clean-generic:
+mostlyclean-am:  mostlyclean-generic
+
+mostlyclean: mostlyclean-am
+
+clean-am:  clean-generic mostlyclean-am
+
+clean: clean-am
+
+distclean-am:  distclean-generic clean-am
+	-rm -f libtool
+
+distclean: distclean-am
+
+maintainer-clean-am:  maintainer-clean-generic distclean-am
+	@echo "This command is intended for maintainers to use;"
+	@echo "it deletes files that may require special tools to rebuild."
+
+maintainer-clean: maintainer-clean-am
+
+.PHONY: uninstall-brushdataDATA install-brushdataDATA tags distdir \
+info-am info dvi-am dvi check check-am installcheck-am installcheck \
+install-exec-am install-exec install-data-local install-data-am \
+install-data install-am install uninstall-am uninstall all-redirect \
+all-am all installdirs mostlyclean-generic distclean-generic \
+clean-generic maintainer-clean-generic clean mostlyclean distclean \
+maintainer-clean
+
+
+.PHONY: files
+
+install-data-local:
+	rm -f $(brushdatadir)/round1.vbr $(brushdatadir)/pepper.gpb
+
+# Tell versions [3.59,3.63) of GNU make to not export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:
diff -Nur gimp-1.2.2.orig/plug-ins/perl/Makefile.PL gimp-1.2.2/plug-ins/perl/Makefile.PL
--- gimp-1.2.2.orig/plug-ins/perl/Makefile.PL	Thu Jul 26 22:17:43 2001
+++ gimp-1.2.2/plug-ins/perl/Makefile.PL	Fri Aug  3 22:44:15 2001
@@ -233,7 +233,7 @@
 	\$(CHMOD) 755 * ; \\
 	\$(MY_FIXIN) * ; \\
 	for plugin in * ; do \\
-	   $GT \"\$\$plugin\" $GT2 ; \\
+	   $GT \"\$\$plugin\" \$(DESTDIR)$GT2 ; \\
 	done
 	\$(RM_RF) inst-temp
 
diff -Nur gimp-1.2.2.orig/plug-ins/perl/Makefile.PL.orig gimp-1.2.2/plug-ins/perl/Makefile.PL.orig
--- gimp-1.2.2.orig/plug-ins/perl/Makefile.PL.orig	Thu Jan  1 01:00:00 1970
+++ gimp-1.2.2/plug-ins/perl/Makefile.PL.orig	Thu Jul 26 22:17:43 2001
@@ -0,0 +1,373 @@
+require 5.004_04;
+
+use Config;
+
+$|=1;
+
+if ($ARGV[0] ne "--writemakefile") {
+   for(@ARGV) {
+      s/^prefix=/--prefix=/i;
+   }
+   
+   do './config.pl';
+   unless ($ENV{IN_GIMP}) { # for the release, take the medium conservative approach
+      $EXTENSIVE_TESTS = 1;
+      
+      $ENV{'EXTENSIVE_TESTS'} = $EXTENSIVE_TESTS;
+      $ENV{CC}=$Config{cc};
+      $ENV{LD}=$Config{ld};
+      $ENV{prefix}=$Config{prefix};
+      $ENV{PERL}=$Config{perlpath};
+      $ENV{MAKEFILE_PL}=$0;
+      $ENV{IN_GIMP}=0;
+   }
+   exit system("./configure",@ARGV)>>8;
+} else {
+   shift;
+   local $do_config_msg = 1;
+   do './config.pl'; die $@ if $@;
+}
+
+@otherdeps = qw(
+      povray imagemagick
+);
+@gtk_pins =
+   qw(
+     dataurl colorhtml avi PDB parasite-editor fade-alpha
+   );
+@pins =
+   qw(
+      windify prep4gif webify tex-to-float ditherize
+      xachlego xachshadow roundsel blended2 warp-sharp
+      scratches blowinout terral_text xachvision perlcc translogo
+      animate_cells image_tile yinyang stamps font_table sethspin
+      perlotine randomblends innerbevel fit-text guidegrid
+      repdup centerguide stampify goldenmean mirrorsplit
+      layerfuncs randomart1 glowing_steel frame_reshuffle frame_filter
+      logulator guide_remove guides_to_selection burst
+      layerfuncs bricks miff dust
+   );
+@pdl_pins =
+   qw(
+      border gouge pixelmap view3d clear_alpha
+
+      fire map_to_gradient
+   ); # fire should use normal gradient map!
+
+eval "use Gtk;"; $GTK = $@ eq "";
+eval "use Parse::RecDescent;"; $PRD = $@ eq "";
+
+$] >= 5.005 or print <<EOF;
+
+NOTICE:  You are using a version of perl older than 5.005. This will slightly
+         reduce the features available to the Gimp-Perl extension.
+
+EOF
+
+$GTK or print <<EOF;
+
+NOTICE:  unable to use the Perl-Gtk interface. Many features (like
+         Gimp::Fu) rely on this extension. You can build without it (and
+         many scripts will be disabled or run with reduced functionality
+         only), but it's better to install it (version 0.6123 or higher is
+         required, you can get it from ftp://ftp.gimp.org/pub/gtk/perl/ or
+         any CPAN mirror.
+
+EOF
+
+$PRD or print <<EOF;
+
+NOTICE: Parse::RecDescent not found, scm2perl, the Scheme->Perl
+        translator, will not work. This is normally not a problem, since
+        it is quite unimportant for most people.
+
+EOF
+
+($major,$minor,$patch)=split /[._]/,$Gtk::VERSION;
+
+require ExtUtils::MakeMaker;
+import ExtUtils::MakeMaker;
+
+$MICRO = int ($] * 100000 % 100);
+
+if ($MICRO > 49) {
+   print <<EOF;
+
+WARNING: You are using perl version $]. This is an *ALPHA* version that is
+         very likely to have serious bugs that keep gimp-perl from working
+         properly. Please upgrade/downgrade to a stable release.
+
+EOF
+}
+
+if ($Config{usethreads} or $Config{use5005threads}) {
+   print <<EOF;
+
+WARNING: Your perl has been built with multithreading enabled. The 5.005
+         threading model is utterly broken (and about to be removed),
+         while the 5.6 threading model is about to change very soon.
+         Since I suppose you know how to fix perl since you enabled
+         threading, I'll proceed with building gimp-perl.
+
+EOF
+}
+
+if ($] < 5.006 && $Config{usethreads}) {
+   print <<EOF;
+
+WARNING: You are using the experimental (and very broken) multithread support.
+         While gimp-perl might seem to work, it is very likely to not work
+         properly (or at all). Please use a *stable* version of perl.
+            
+EOF
+}
+
+push @pins, @pdl_pins if $PDL;
+push @pins, @gtk_pins if $GTK;
+
+@INC = grep /^\//,@INC; # comment out as well?
+if (0) {		# comment out because it breaks
+eval { $Gimp::no_SIG=1; require Gimp };
+unless($@) {
+   eval { require Gimp::Config };
+   $old_prefix = eval { $Gimp::Config{GIMP_PREFIX} };
+   $old_prefix = eval { Gimp::_gimp_prefix() } unless $old_prefix;
+   if ($@) {
+      print <<EOF;
+
+WARNING: I've detected an old version of Gimp-Perl installed
+	 already. Since I cannot detect the prefix used to install
+	 it I will just overwrite it.  If you happen to use two
+	 different and incompatible versions of the Gimp with differing
+	 prefixes you should call configure with the --disable-perl
+	 switch to disable the perl extension, or consider installing
+	 the perl module elsewhere, using the environment variables
+	 PERL5LIB=/my/module/dir and PERL_MM_OPTS="PREFIX=\$PERL5LIB" to
+	 overwrite the installation directory (PERL_MM_OPTS) and run the
+	 Gimp (PERL5LIB). See "perldoc ExtUtils::MakeMaker" for a full
+	 discussion of your options.
+
+EOF
+   } else {
+      if ($GIMP_PREFIX ne $old_prefix) {
+	 print <<EOF;
+
+WARNING: I've detected another installation of the Gimp-Perl extension.
+	    
+	 This version uses the prefix '$GIMP_PREFIX'.
+	 The already installed version uses the prefix '$old_prefix'.
+
+	 They don't match, which indicates that installing Gimp-Perl might
+	 overwrite an old but still used installation. The Gimp-Perl
+         installation _might_ therefore be broken.
+
+EOF
+      }
+   }
+}
+}
+
+sub MY::install {
+   my $self=shift;
+   package MY;
+   my $install = $self->SUPER::install(@_);
+   ($install =~ s/\b(un)?install\b/really-$1install/g) or return $install;
+   '
+install :: install-po
+	@for dir in \
+	   $(INSTALLPRIVLIB) \
+	   $(INSTALLARCHLIB) \
+	   $(INSTALLBIN) \
+	   $(INSTALLSCRIPT) \
+	   $(INSTALLMAN1DIR) \
+	   $(INSTALLMAN3DIR) ; \
+	do \
+	   $(MKPATH) "$$dir"; \
+	   if test -d "$$dir" && test -w "$$dir" ; then : ; else \
+	      echo ; \
+	      echo "ERROR: installation directory \"$$dir\"" ; \
+	      echo "       is not writable, not installing gimp-perl" ; \
+	      echo ; \
+	      exit ; \
+	   fi ; \
+	done ; \
+	$(MAKE) really-install install-plugins'."
+	$main::dont_embed || (cd embed && \$(MAKE) install)
+
+install-po:
+	cd po && \$(MAKE) install
+        
+".$install;
+}
+
+sub MY::postamble {
+   my $self=shift;
+   my $install_program = $cfg{INSTALL};
+   $install_program =~ s{^\.\./}{../../};
+   my $GT = $IN_GIMP ? $install_program : "$GIMPTOOL --install-admin-bin";
+   my $UT = $IN_GIMP ? '$(RM_F)' : "$GIMPTOOL --uninstall-admin-bin";
+   my $GT2 = $IN_GIMP ? '$(gimpplugindir)/plug-ins/' : '';
+   my $postamble="
+
+objclean :: clean
+maintainer-clean :: realclean
+distclean :: realclean
+check :: test
+
+MY_FIXIN = \$(PERL) -I\$(PERL_ARCHLIB) -I\$(PERL_LIB) -MExtUtils::MakeMaker -e 'MY->fixin(\@ARGV)'
+
+all ::
+	$main::dont_embed || (cd embed && \$(MAKE) all)
+
+clean ::
+	$main::dont_embed || (cd embed && \$(MAKE) clean)
+	test -f Makefile || mv -f Makefile.old Makefile
+	\$(RM_RF) inst-temp
+
+install-plugins ::
+	\$(RM_RF) inst-temp
+	\$(MKPATH) inst-temp
+	cd inst-temp ; \\
+	\$(UMASK_NULL) ; \\
+	\$(CP) ".join(' ',map("'../examples/$_'",sort @pins))." ../Perl-Server . ; \\
+	\$(CHMOD) 755 * ; \\
+	\$(MY_FIXIN) * ; \\
+	for plugin in * ; do \\
+	   $GT \"\$\$plugin\" $GT2 ; \\
+	done
+	\$(RM_RF) inst-temp
+
+uninstall :: force_uninstall_from_\$(INSTALLDIRS)dirs
+	for plugin in Perl-Server @pins; do \\
+           $UT $GT2\$\$plugin; \\
+        done
+
+force_uninstall_from_perldirs ::
+	\$(PERL) -MExtUtils::Install -e 'uninstall(\$\$ARGV[0],1,0)' ".$self->catfile('$(PERL_ARCHLIB)','auto','$(FULLEXT)','.packlist')."
+
+force_uninstall_from_sitedirs ::
+	\$(PERL) -MExtUtils::Install -e 'uninstall(\$\$ARGV[0],1,0)' ".$self->catfile('$(SITEARCHEXP)','auto','$(FULLEXT)','.packlist')."
+
+# generate tags file
+tags: .
+	ctags --lang=c `find . -name '*.xs' -print`
+
+# run autoconf (&c)
+autoconf:
+	aclocal; autoheader; autoconf
+        
+# set \$VERSION in all modules
+setver:
+	\$(PERL) -pi -e 's/^(\\s*\\\$\$VERSION\\s*=\\s*).*\$\$/\$\${1}\$(VERSION);/' *.pm Gimp/*.pm UI/*.pm Net/*.pm
+
+";
+
+   $postamble;
+}
+
+$GIMP_INC_NOUI = "-I../../ $GIMP_INC_NOUI" if $IN_GIMP;
+@DIRS= qw/Gimp Net UI/;
+
+$build_module = $IN_GIMP || $ENV{GIMP_PERL_MODULE_INC};
+# temporarily disabled because of politics
+$build_module = $ENV{GIMP_PERL_MODULE_INC};
+
+print "building embedded perl module... ";
+if ($build_module) {
+   print "yes\n";
+   $dont_embed = "false";
+   push(@DIRS,'Module');
+   print "configuring in embed/Makefile...\n";
+   system("cd embed && perl Makefile.PL");
+} else {
+   print "no\n";
+   $dont_embed = "true";
+}
+
+print "writing Gimp/Config.pm... ";
+{
+   sub conf_eval {
+      my $v = expand($cfg{$_[0]});
+      $v =~ s/([\\\]])/\\$1/g;
+      $v;
+   }
+   local $/,*FH;
+   open FH,"<Gimp/Config.pm.in" or die "Gimp/Config.pm.in: $!\n";
+   my $cfg = <FH>;
+   $cfg =~ s/#CFG#/join "",
+                        map sprintf("   %-20s => q[%s],\n",$_,conf_eval $_),
+                            keys %cfg/e;
+   open FH,">Gimp/Config.pm" or die "Gimp/Config.pm: $!\n";
+   print(FH $cfg)>0 or die "Gimp/Config.pm: $!\n";
+}
+print "ok\n";
+
+@EXE_FILES = qw(gimpdoc xcftopnm embedxpm);
+push @EXE_FILES, qw(scm2perl scm2scm) if $PRD;
+
+WriteMakefile(
+    'dist'	=> {
+	            PREOP	=> 'make setver && chmod -R u=rwX,go=rX . ;',
+	            COMPRESS	=> 'gzip -9v',
+	            SUFFIX	=> '.gz',
+	           },
+    'PREREQ_PM'	=> {
+    		    Gtk			=> 0.5,
+                    PDL			=> 1.99,
+    		    Data::Dumper	=> 2.0,
+                    Parse::RecDescent	=> 1.6,
+		   },
+    'DIR'	=> [@DIRS],
+    'NAME'	=> 'Gimp',
+    'VERSION_FROM' => 'Gimp.pm',
+    'INSTALLBIN'=> $bindir,
+    'PM'	=> {
+    		    'Gimp.pm'		=> '$(INST_LIBDIR)/Gimp.pm',
+    		    'Gimp/Data.pm'	=> '$(INST_LIBDIR)/Gimp/Data.pm',
+    		    'Gimp/Fu.pm'	=> '$(INST_LIBDIR)/Gimp/Fu.pm',
+    		    'Gimp/Lib.pm'	=> '$(INST_LIBDIR)/Gimp/Lib.pm',
+    		    'Gimp/PDL.pm'	=> '$(INST_LIBDIR)/Gimp/PDL.pm',
+    		    'Gimp/Util.pm'	=> '$(INST_LIBDIR)/Gimp/Util.pm',
+    		    'Gimp/Feature.pm'	=> '$(INST_LIBDIR)/Gimp/Feature.pm',
+    		    'Gimp/Module.pm'	=> '$(INST_LIBDIR)/Gimp/Module.pm',
+    		    'Gimp/Config.pm'	=> '$(INST_LIBDIR)/Gimp/Config.pm',
+    		   },
+    'LDFROM'	=> expand("\$(OBJECT) $LIBS $INTLLIBS"),
+    'INC'	=> "$INC1 $GIMP_INC_NOUI $CPPFLAGS $CFLAGS",
+    'DEFINE'	=> "$DEFINE1 $DEFS",
+    'EXE_FILES'	=> \@EXE_FILES,
+    'macro'	=> \%cfg,
+    'realclean'	=> { FILES => "config.status config.cache config.pl config.log config.h Gimp/Config.pm Makefile" },
+    'clean'	=> { FILES => "Makefile.old stamp-h" },
+);
+
+$IN_GIMP or print <<EOF;
+
+
+Hopefully, Gimp is now correctly configured. you can now enter "make",
+"make test" and "make install".
+
+EOF
+
+__END__
+# write an empty makefile (the last chance to stop)
+# and warn the user.
+sub emergency_stop {
+   print STDERR "WARNING: *** perl extension will not be built ($_[0]) ***\n\n";
+   open MAKEFILE,">Makefile" or die "unable to create Makefile: $!";
+   print MAKEFILE <<EOF;
+all install check:
+
+clean mostlyclean objclean:
+
+distclean maintainer-clean realclean clobber: clean
+	\$(RM_F) Makefile config.cache config.pl config.log
+        \$(RM_F) config.h config.status stamp-h Makefile.old Gimp/Config.pm
+        \$(RM_RF) test-dir inst-temp
+EOF
+   close MAKEFILE;
+   exit;
+}
+
+
+
diff -Nur gimp-1.2.2.orig/plug-ins/perl/po/Makefile.in.in gimp-1.2.2/plug-ins/perl/po/Makefile.in.in
--- gimp-1.2.2.orig/plug-ins/perl/po/Makefile.in.in	Tue Jun 19 23:51:04 2001
+++ gimp-1.2.2/plug-ins/perl/po/Makefile.in.in	Fri Aug  3 22:44:15 2001
@@ -121,7 +121,7 @@
 	    *)     destdir=$(localedir);; \
 	  esac; \
 	  lang=`echo $$cat | sed 's/\$(CATOBJEXT)$$//'`; \
-	  dir=$$destdir/$$lang/LC_MESSAGES; \
+	  dir=$(DESTDIR)$$destdir/$$lang/LC_MESSAGES; \
 	  if test -r "$(MKINSTALLDIRS)"; then \
 	    $(MKINSTALLDIRS) $$dir; \
 	  else \
@@ -223,6 +223,9 @@
 	  fi; \
 	done
 
+# Temporary workaround for building under PLD GNU/Linux
+update-gmo:
+
 POTFILES: POTFILES.in
 	( if test 'x$(srcdir)' != 'x.'; then \
 	    posrcprefix='$(top_srcdir)/'; \
diff -Nur gimp-1.2.2.orig/po-libgimp/Makefile.in.in gimp-1.2.2/po-libgimp/Makefile.in.in
--- gimp-1.2.2.orig/po-libgimp/Makefile.in.in	Thu Jan 27 11:46:58 2000
+++ gimp-1.2.2/po-libgimp/Makefile.in.in	Fri Aug  3 22:44:15 2001
@@ -123,7 +123,7 @@
 	    *)     destdir=$(localedir);; \
 	  esac; \
 	  lang=`echo $$cat | sed 's/\$(CATOBJEXT)$$//'`; \
-	  dir=$$destdir/$$lang/LC_MESSAGES; \
+	  dir=$(DESTDIR)$$destdir/$$lang/LC_MESSAGES; \
 	  if test -r "$(MKINSTALLDIRS)"; then \
 	    $(MKINSTALLDIRS) $$dir; \
 	  else \
diff -Nur gimp-1.2.2.orig/po-script-fu/Makefile.in.in gimp-1.2.2/po-script-fu/Makefile.in.in
--- gimp-1.2.2.orig/po-script-fu/Makefile.in.in	Sat Jun 24 12:46:57 2000
+++ gimp-1.2.2/po-script-fu/Makefile.in.in	Fri Aug  3 22:44:15 2001
@@ -130,7 +130,7 @@
 	    *)     destdir=$(localedir);; \
 	  esac; \
 	  lang=`echo $$cat | sed 's/\$(CATOBJEXT)$$//'`; \
-	  dir=$$destdir/$$lang/LC_MESSAGES; \
+	  dir=$(DESTDIR)$$destdir/$$lang/LC_MESSAGES; \
 	  if test -r "$(MKINSTALLDIRS)"; then \
 	    $(MKINSTALLDIRS) $$dir; \
 	  else \
